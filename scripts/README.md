## 代码结构

主要功能通过 `update_meta.py` 与 `update_data.py` 实现，分别负责饰品**元数据**与**数据**的更新。

## 饰品元数据更新

**元数据**指 “关于饰品类别的信息”，主要包括：

- 饰品的 `buff_id` （主键）
- 饰品的 `igxe_id` 与 `c5_id` （如有）
- 饰品在 Steam Market 的 `hash_name` 与 `item_id`

上述对应关系几乎是**静态**的，无需频繁更新。

`update_meta.py` 获取满足筛选条件的饰品的元数据，并维护合理大小的*饰品列表*作为数据更新的目标。

元数据约 3 天完整更新一次，长期不满足筛选条件的饰品会在 14 天后过期并移出列表。

## 饰品数据更新

**数据**指 “关于饰品价格的信息”，主要包括：

- 饰品在 BUFF/IGXE/C5 的寄售价格信息
- 饰品在 Steam Market 的求购/寄售价格信息
- 从以上两项中衍生出的**价格比例**

我们将饰品列表中的饰品依照*加权比例*进行分组，并设置不同的随机更新权重，使得比例较低的物品有更高的更新频率。

饰品数据的更新模式为：单线程随机更新 40 分钟，后进行一次并行更新，对*加权比例*最低的 1200 个物品中更新时间最早的 600 个进行更新；之后返回单线程更新模式，循环。